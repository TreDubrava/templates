<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>x402 Payment-Gated API</title>

		<!-- CSS ‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì -->
		<link rel="stylesheet" href="./styles.css" />

		<!-- JS ‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì -->
		<script src="/dist/index.js" type="module" defer></script>
	</head>
	<body>
		<div class="container">
			<!-- Left Panel: Documentation (2/3) -->
			<div class="content-panel">
				<h1>x402 Payment-Gated API</h1>
				<p>
					This Cloudflare Worker demonstrates payment-gated API endpoints using
					the
					<a href="https://x402.org" target="_blank">x402 protocol</a> with
					stateless cookie-based authentication.
				</p>

				<h2>Available Endpoints</h2>

				<div class="endpoint">
					<h3>
						<code>GET /message</code>
						<span class="badge public">PUBLIC</span>
					</h3>
					<p>
						Public endpoint that returns a simple message. No payment required.
					</p>
					<p><a href="/message">Try it now ‚Üí</a></p>
				</div>

				<div class="endpoint">
					<h3>
						<code>GET /premium</code>
						<span class="badge protected">PROTECTED</span>
					</h3>
					<p>
						Protected endpoint that requires payment (USDC on Base Sepolia
						testnet) OR a valid authentication cookie.
					</p>
					<p><strong>Price:</strong> $0.01 (valid for 1 hour)</p>
					<p>
						<a href="/premium">Try it now ‚Üí</a> (will show payment requirements)
					</p>
				</div>

				<h2>How it works</h2>
				<ol>
					<li>
						Request a protected endpoint without payment ‚Üí receive 402 Payment
						Required
					</li>
					<li>Create and sign a payment using your crypto wallet</li>
					<li>
						Retry the request with the payment in the
						<code>X-PAYMENT</code> header
					</li>
					<li>
						Receive premium content + authentication cookie (valid 1 hour)
					</li>
					<li>
						Subsequent requests use the cookie (no additional payment needed)
					</li>
				</ol>

				<h2>Resources</h2>
				<ul>
					<li>
						<a href="https://x402.gitbook.io/x402" target="_blank"
							>x402 Protocol Documentation</a
						>
					</li>
					<li>
						<a href="https://github.com/coinbase/x402" target="_blank"
							>x402 SDK on GitHub</a
						>
					</li>
					<li>
						<a
							href="https://docs.base.org/network-information/#base-testnet-sepolia"
							target="_blank"
							>Base Sepolia Testnet</a
						>
					</li>
				</ul>
			</div>

			<!-- Right Panel: Test Client (1/3) -->
			<div class="test-panel">
				<h3>üß™ Test Payment Flow</h3>

				<div class="warning-box">
					‚ö†Ô∏è<strong>Test Only:</strong> Use Base Sepolia testnet wallets only.
					Never use real funds.
				</div>

				<div id="test-client-root"></div>
			</div>
		</div>
	</body>
</html>
